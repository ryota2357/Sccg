# メモ

## HTMLエスケープ

ビルド時にWarningが出るので、出たところを次のように修正する

| 文字  |  エスケープ  |
|:---:|:-------:|
| `&` | `&amp;` |
| `<` | `&lt;`  |
| `>` | `&gt;`  |

## vim/neovim の help から Source の Group を作成する時の加工用コマンド

- `tr -s '~'` で複数個の`~`を 1 つに圧縮できる
    - `~`には`\n`とか、`\t`とか
    - `tr -s '\n'` で空行を削除になる
- `sed -e 's/ *$//' -e 's/^  */\t/'` で行末の空白を削除 + 行頭の空白をタブに置換
    - sed で` +` ができないので`  *` にしてる
- `sed 's/^\t\*.*\*$//'` で `(タブ)*~~~*` を削除
    - help のタグ行を削除できる
- `gsed -z 's/\n\t/ /g'` でタブ始まりの行を join
    - 複数行の説明を 1 行にする時とか

## vim正規表現

- Vim で最短マッチは`\{-}`でできる。

## tsv とかを C#の XML コメントに変換する時のコマンド

- `-F '\t'` で区切り文字をタブに指定
- `-v 'OFS=\n'` で出力の区切り文字を改行に指定

```
awk -F '\t' -v 'OFS=\n' '{
  sub("^","\n/// <summary>\n/// ",$2);
  sub("$","\n/// </summary>",$2);
  sub("$",",",$1)
  print $2,$1 }'
```

## vscode の doc から Source の Group を作成する時の加工用コマンド

- `sed -e 's/- `\(.*\)`: \(.*\)/\1 = new("\1");\t\1: \2/'` でGroupの定義と説明をtab区切りにする
- `sed -e 's/^#.*//' | tr -s '\n'` とかで #始まりの行+空行削除
- vim で 行頭に `public static ... ` を追加
- ↑にあるawk を少しいじった↓で XML コメントに変換

```
awk -F '\t' -v 'OFS=\n' '{
  sub("^","\n/// <summary>\n/// ",$2);
  sub("$","\n/// </summary>",$2);
  sub("$",";",$1)
  print $2,$1 }'
```

- 手作業でクラスに分割、変数名変更...


